# 画像検索アプリ

Reactを用いる

### 画像検索アプリの流れ

ユーザーが検索キーワードを入力する。

「検索」ボタンが押される。

入力されたキーワードを使ってAPIリクエストを送る。

APIから画像のURLを含むデータを受け取る。

取得した画像のURLを使って、画面に画像を表示する。

### 学習メモ

#### イベントオブジェクトとは？

イベントオブジェクトは、ボタンのクリックやキーボード入力など、ブラウザ上で何かが起きたときに、そのイベントに関する情報をまとめて提供してくれる特別なオブジェクトです。

例えば、あなたが「検索」ボタンをクリックしたとしましょう。そのクリックという「イベント」には、様々な情報が含まれています。

・どこがクリックされたか？ (e.target)

・どのキーが押されたか？ (e.key)

・マウスのX座標は？ (e.clientX)

これらの情報を取得するために、Reactはイベントハンドラ関数（onClickやonChangeに指定した関数 ex. onclick={イベントハンドラ関数}）の引数として、このイベントオブジェクトを自動的に渡してくれます。慣習的にeやeventと名付けられます。

e,eventを引数として利用する場合はテキスト自身と結びついてる関数でのみ使えるbuttonを押したらテキストの内容を取るわけじゃなくてボタンがどう押されたかだけしか取れない

だからonclickと結びつくイベントハンドラ関数の引数としてeを選択しても入力欄の内容は得られない

#### エラーメッセージの一括管理

```javaScript
const [error, setError] = useState({ message: null, type: null });
```
messageは表示するテキスト、typeはエラーの種類（例: 'warning', 'api_error'）を区別するために使います。

また、この文章をreturn文で表示させる時にnullがfalseと同じ役割であるから三項演算子(?,:)が使える

```javaScript
{error.message ? (
    <p>{error.message}</p>
    ) : (
)}
```

#### .trim()とは

.trim()は、JavaScriptの文字列が持つメソッドです。文字列の両端にある空白（スペース、タブ、改行など）を取り除くことができる

これによりユーザーが入力した余計に入力した空白等があっても純粋な文字列として取り出せる

たとえば、ユーザーが入力フォームに「　　買い物　　」のように余計なスペースを入れてしまった場合、.trim()を使うと「買い物」という純粋な文字列だけを取得できます。

元の文字列: "　　買い物　　"

.trim()実行後: "買い物"

#### APIキーの管理方法

githubなどにプログラムを公開する時にAPIキーを公開しない方法

##### 1. .envファイルの作成

プロジェクトのルートディレクトリに .env という名前のファイルを作成します。

このファイルには、公開したくない秘密の情報（APIキーなど）を記述します。

重要なルール

ファイル名: 必ず.env とします。**※~~~.envではダメ**

変数名: Reactのプロジェクトでは、環境変数名の前に REACT_APP_ を付けます。

書き方: キー=値 の形式で書きます。

クォーテーションは不要: 値をクォーテーション（"" や ''）で囲まないでください。

##### 2. gitignoreファイルの設定

.env ファイルが誤ってGitにプッシュされないように、.gitignore ファイルに追記します。

これにより、.env ファイルはGitの管理対象から外れます。

##### 3. コード内での呼び出し

Reactのコード内でAPIキーを使う際は、process.env を通して参照します。

書き方

process.env.変数名(1.で作成した変数を用いる)

追記

.envはローカルファイルのため自分自身の環境にしかない

#### fetchとは

fetchは、JavaScriptに組み込まれている関数で、ウェブサイトやAPIからデータを取得するために使われます。

fetchは、**非同期**という特別な方法で動作します。これは、「返事が来るのを待つ間に、他の作業（例えば、アプリのUIを更新する）を続ける」という意味です。

##### fetchを使う3つのステップ

##### 1.リクエストを送る

fetch()関数の引数に、データの取得元となるURLを指定します。

例
```javaScript
fetch('https://pixabay.com/api/?key=...');
```
これによりこのURLに「データをください」とリクエストを出す

##### 2.レスポンスを受け取る(.then())

リクエストに対する返事（レスポンス）がサーバーから来たら、.then()を使ってそのレスポンスを処理します。
例
```javaScript
.then(response => {
  // レスポンスが成功したかチェックする
  if (!response.ok) {
    throw new Error('データの取得に失敗しました');
  }
  // レスポンスをJSON形式に変換する
  return response.json();
});
```
レスポンスはそのままでは使えないので、response.json()を使って、私たちが理解できるJSON形式のデータに変換します。

###### ※JSON形式とは

データを軽量に表現するためのテキストベースのデータ形式

JSONの利点

軽量で読みやすい: テキスト形式なので人間にも読みやすく、ファイルサイズも小さいです。

汎用性が高い: ほとんどのプログラミング言語にJSONを扱うためのライブラリが標準で用意されており、異なるシステム間でのデータ交換が容易です。

構造化しやすい: オブジェクトと配列を組み合わせることで、複雑なデータを柔軟に表現できます。

JSONの基本的な構造

**1.オブジェクト({})**
キーと値のペアの集まりです。キーは文字列で、ダブルクォーテーション（"）で囲みます。値は文字列、数値、真偽値（true / false）、配列、別のオブジェクト、またはnullのいずれかです。
```JSON
{
  "name": "山田太郎",
  "age": 30,
  "isStudent": false
}
```
**2.配列（[]）**
順序付けられた値のリストです。角括弧（[]）で囲み、各要素はコンマ（,）で区切ります。
```JSON
[
  "りんご",
  "バナナ",
  "いちご"
]
```
##### 3. 変換したデータを利用する (.then())

JSON形式に変換されたデータは、もう一度.then()を使って受け取ります。

```JavaScript
.then(data => {
  // dataには、APIから取得したすべての情報が入っている
  console.log(data);
  // このdataを使って、Stateを更新したり、画面に表示したりする
});
```
##### .catchとは

.catch(): throwされたエラーをまとめてキャッチし、失敗したときの処理を記述する場所。
例
```javaScript
.then(response => {
  // レスポンスが成功したかチェックする
  if (!response.ok) {
    throw new Error('データの取得に失敗しました');
  }
  // レスポンスをJSON形式に変換する
  return response.json();
});
.catch(error => {
    //エラー時の処理を記入
})
```

#### imgタグの属性

imgタグの属性

**src**

ブラウザに対して「ここに指定された場所から画像や動画などの**リソース（元となるファイル）**を読み込んで表示しなさい」と指示するため,

**alt**

ブラウザや支援技術（スクリーンリーダーなど）に対して「画像が表示できないときに、この代替テキストを代わりに表示しなさい」
```JSX
<img src="profile.jpg" alt="プロフィール画像" />
```

#### input,button以外にユーザーからの入力を得る方法

その他の入力手段

1. <textarea>

複数行のテキスト入力を受け付けるための要素です。コメント欄やメッセージボックスなど、まとまった文章を入力してもらう場合に使います。

2. <select>, <option>

ドロップダウンリストを作成するための要素です。リストから1つだけ項目を選択してもらう場合に使います。選択肢が多い場合に、画面をすっきりと見せることができます。

3. <input type="checkbox">

複数の項目を自由に選択してもらう場合に便利な要素です。ON/OFFを切り替えるトグルボタンとしても使えます。

4. <input type="radio">

複数の選択肢の中から、必ず1つだけ選んでもらいたい場合に使う要素です。性別やサイズなど、排他的な選択肢で使われます。

5. <input type="range">

スライダー形式で数値を入力してもらう要素です。音量調整や、明るさ調整など、直感的に値を変更したい場合に適しています。